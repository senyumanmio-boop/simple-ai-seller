<div id="input-area">
    <input type="text" id="user-input" placeholder="Ketik di sini...">
    <button onclick="prosesChat()" style="padding: 10px; background: blue; color: white; border: none; border-radius: 5px; cursor: pointer;">KIRIM</button>
</div>
<script>
const API_KEY = "AIzaSyCwVFXmF0ZSzVgzeqoGyNSekWHvC74eALA";

async function prosesChat() {
    const input = document.getElementById('user-input');
    const box = document.getElementById('messages');
    const text = input.value.trim();

    if (!text) return;

    box.innerHTML += `<div style="color:blue; margin: 5px;"><b>Kamu:</b> ${text}</div>`;
    input.value = "";

    try {
        // KITA PAKAI MODEL 'gemini-pro' YANG LEBIH STABIL
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`;
        const res = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
        });
        
        const data = await res.json();

        if (data.error) {
            box.innerHTML += `<div style="color:red; margin: 5px;"><b>AI Error:</b> ${data.error.message}</div>`;
        } else {
            const reply = data.candidates[0].content.parts[0].text;
            box.innerHTML += `<div style="color:red; margin: 5px;"><b>AI:</b> ${reply}</div>`;
        }
    } catch (e) {
        box.innerHTML += `<div style="color:red; margin: 5px;"><b>AI:</b> Gagal total, cek internet!</div>`;
    }
    box.scrollTop = box.scrollHeight;
}

// Pasang fungsi Enter
document.getElementById('user-input').onkeydown = function(e) {
    if (e.keyCode == 13) { prosesChat(); }
}; <script>

<body>

	<div id="box"> 
		<!-- this is the main chat box where ai seller bot and buyer will communicate -->
<div id="messages">
	<div class="sellerblock">
		<div class="sellermessage">
		Hi, What do you want to buy?</div>
		<!-- write here anything you wish -->
	</div>
	<!-- 
	<div class="buyerblock">
		<div class="buyermessage">Mobile phone</div>
	</div> -->
	<!-- these blocks are just for example -->

	<!-- now the hidden blocks  -->
</div>
<div id="hidden">
	<div id="sellerblock" class="sellerblock">
		<div class="sellermessage">
		Hi, What do you want to buy?</div>
		<!-- write here anything you wish -->
	</div>
	<div id="buyerblock" class="buyerblock">
		<div class="buyermessage">Mobile phone</div>
	</div>
</div>
<input id="input" onkeyup="taketheinput(event)">
		
	</div>
<script type="text/javascript" src="seller.js"></script>
</body>

</html>



