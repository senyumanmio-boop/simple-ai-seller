<script>
const API_KEY = "AIzaSyCwVFXmF0ZSzVgzeqoGyNSekWHvC74eALA";

async function getResponse(query) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;
    try {
        const response = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ contents: [{ parts: [{ text: query }] }] })
        });
        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
    } catch (e) { return "Koneksi AI error..."; }
}

async function gasChat() {
    const input = document.getElementById('input');
    const msgBox = document.getElementById('messages');
    if (!input.value.trim()) return;

    msgBox.innerHTML += `<div style="text-align:right; margin:10px; color:blue;"><b>Kamu:</b> ${input.value}</div>`;
    const userTeks = input.value;
    input.value = "";

    const botReply = await getResponse(userTeks);
    msgBox.innerHTML += `<div style="text-align:left; margin:10px; color:red;"><b>AI:</b> ${botReply}</div>`;
    msgBox.scrollTop = msgBox.scrollHeight;
}

// DETEKSI ENTER LANGSUNG DI SINI
document.getElementById('input').onkeydown = function(e) {
    if (e.keyCode == 13) { gasChat(); }
};
</script>
<body>

	<div id="box"> 
		<!-- this is the main chat box where ai seller bot and buyer will communicate -->
<div id="messages">
	<div class="sellerblock">
		<div class="sellermessage">
		Hi, What do you want to buy?</div>
		<!-- write here anything you wish -->
	</div>
	<!-- 
	<div class="buyerblock">
		<div class="buyermessage">Mobile phone</div>
	</div> -->
	<!-- these blocks are just for example -->

	<!-- now the hidden blocks  -->
</div>
<div id="hidden">
	<div id="sellerblock" class="sellerblock">
		<div class="sellermessage">
		Hi, What do you want to buy?</div>
		<!-- write here anything you wish -->
	</div>
	<div id="buyerblock" class="buyerblock">
		<div class="buyermessage">Mobile phone</div>
	</div>
</div>
<input id="input" onkeyup="taketheinput(event)">
		
	</div>
<script type="text/javascript" src="seller.js"></script>
</body>

</html>
